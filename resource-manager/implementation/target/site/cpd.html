<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2018-04-17 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20180417" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2018-04-17</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>CPD Results<a name="CPD_Results"></a></h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.3.5.</p></div>
<div class="section">
<h2>Duplications<a name="Duplications"></a></h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1907</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2116</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            LOG.info(&quot;endpoint match recieved is {}&quot;, endpointMatch.toString());
            LOG.info(&quot;hard timeout {} idle timeout {} &quot;, hardtimeout, idletimeout);
            LOG.info(&quot;meter is {}&quot;, meter);
            LOG.info(&quot;source node is: {}  and port {} &quot;, srcNode.getValue(), srcNodePort.getValue());

            LOG.info(&quot;destination node is  {} and port is {}&quot;, destNode.getValue(), destNodePort.getValue());

           // LOG.info(&quot;Source VLAN : &quot; + srcVlan.getValue() );
           // LOG.info(&quot;Dest VLAN: &quot; + destVlan.getValue());

            List&lt;EmbeddingFlowRequest&gt; listofFlowRequests = new ArrayList&lt;&gt;();

            LOG.info(&quot;Physical path links on the path: &quot; + physicalPathLinks.toString());

/*
            System.out.println(endpointMatch.toString() + &quot; \n\n&quot;);

	    System.out.println(physicalPathLinks.toString() + &quot; \n\n&quot;);

	    System.out.println(&quot;source is: &quot; + srcNode.getValue() + &quot; \n\n&quot;);
	    System.out.println(&quot;dest is: &quot; + destNode.getValue() + &quot; \n\n&quot;);

	    System.out.println(&quot;source is: &quot; + srcNodePort.getValue() + &quot; \n\n&quot;);
	    System.out.println(&quot;dest is: &quot; + destNodePort.getValue() + &quot; \n\n&quot;);

	*/


            NodeConnectorId destNodeInPort = new NodeConnectorId(physicalPathLinks.get(physicalPathLinks.size() - 1).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);

            if (meter == null) {
                Flow sourceFlowWithMeter = createSourceFlowWithoutQueues(srcNodePort, idletimeout, hardtimeout, endpointMatch, null, physicalPathLinks, srcVlan);
                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(srcNode.getValue(), sourceFlowWithMeter);

                listofFlowRequests.add(new EmbeddingFlowRequest(srcNode.getValue(), sourceFlowWithMeter.getCookie().getValue(), meter, burst, bandwidth));

                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; resultFuture = salFlowService.addFlow(flowinputSrcNode);

                if (resultFuture.get().isSuccessful()) {
                    LOG.info(&quot;Source Flow added successfully and cookie is: &quot; + sourceFlowWithMeter.getCookie());

                } else {

                    LOG.error(&quot;Source Flow was not installed and error is &quot; + resultFuture.get().getErrors().toString());

                }


            } else {



                VTNMeterUtils vtnMeterUtils = new VTNMeterUtils(new MeterId(meter), bandwidth, burst);

                AddMeterInput addMeterInput = vtnMeterUtils.createAddMeterInput(srcNode);


                Future&lt;RpcResult&lt;AddMeterOutput&gt;&gt; future = salMeterService.addMeter(addMeterInput);

                Flow sourceFlowWithMeter = null;

                if (future.get().isSuccessful()) {
                    LOG.info(&quot;Meter &quot; + meter + &quot; added successfully&quot;);
                    LOG.info(&quot;Creating Source flow with meter now&quot;);
                    sourceFlowWithMeter = createSourceFlowWithoutQueues(srcNodePort, idletimeout, hardtimeout, endpointMatch, meter, physicalPathLinks, srcVlan);
                    LOG.info(&quot;source flow created on {} with port {} &quot;, srcNode.getValue(), srcNodePort.getValue());

                }


                if (sourceFlowWithMeter == null) {
                    LOG.info(&quot;Error!, Meter was not created&quot;);
                    LOG.info(&quot;Error is: &quot; + future.get().getErrors().toString());
                } else {

                    AddFlowInput flowinputSrcNode = getAddFlowInputToSend(srcNode.getValue(), sourceFlowWithMeter);

                    listofFlowRequests.add(new EmbeddingFlowRequest(srcNode.getValue(), sourceFlowWithMeter.getCookie().getValue(), meter, burst, bandwidth));

                    Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; resultFuture = salFlowService.addFlow(flowinputSrcNode);

                    if (resultFuture.get().isSuccessful()) {
                        LOG.info(&quot;Source Flow added successfully and cookie is: &quot; + sourceFlowWithMeter.getCookie());

                    } else {

                        LOG.error(&quot;Source Flow was not installed and error is &quot; + resultFuture.get().getErrors().toString());

                    }


                }

            }

            Flow destFlowWithoutMeter = createDestinationFlowWithoutQueues(destNodePort, idletimeout, hardtimeout, endpointMatch, destNodeInPort, destVlan);

            LOG.info(&quot;source flow created on {} with port {} &quot;, destNode.getValue(), destNodePort.getValue());


            NodeConnectorId inPortForSecond = new NodeConnectorId(physicalPathLinks.get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);

            //removing first link because already used
            physicalPathLinks.remove(physicalPathLinks.get(0));

            List&lt;Flow&gt; flows = createFlowsWithoutQueues(physicalPathLinks, idletimeout, hardtimeout, endpointMatch, inPortForSecond);


            AddFlowInput flowinputDestNode = getAddFlowInputToSend(destNode.getValue(), destFlowWithoutMeter);

            listofFlowRequests.add(new EmbeddingFlowRequest(destNode.getValue(), destFlowWithoutMeter.getCookie().getValue(), meter, burst, bandwidth));


            salFlowService.addFlow(flowinputDestNode);

            LOG.info(&quot;Destination Flow added&quot;);

            //System.out.println(&quot;source and destination flows installed&quot;);


            for (int i = 0; i &lt; physicalPathLinks.size(); i++) {

                // System.out.println(&quot;started for loop&quot;);


                String edge_switch = physicalPathLinks.get(i)
                        .getSource().getSourceNode().getValue();

                LOG.info(&quot;Flow is now being installed on &quot; + physicalPathLinks.get(i).getSource().getSourceTp().getValue());

                Flow createdFlow = flows.get(i);

                listofFlowRequests.add(new EmbeddingFlowRequest(edge_switch, createdFlow.getCookie().getValue(), meter, burst, bandwidth));


                AddFlowInput flow = getAddFlowInputToSend(edge_switch, createdFlow);

                // add flow to sal

                salFlowService.addFlow(flow);

            }


            //  System.out.println(&quot;done&quot;);

            IdToListMap.put(id, listofFlowRequests);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>244</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>424</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                                               List&lt;EmbeddingFlowRequest&gt; listofFlowRequests = new ArrayList&lt;&gt;();


                                               Flow first = null;
                                               if (meterId == null) {

                                                   first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, null, links, queues, srcVlan);

                                                   listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                   AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                   Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                   if (flowResult.get().isSuccessful()) {
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   } else {

                                                       LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                   }


                                               } else {



                                                   VTNMeterUtils vtnMeterUtils = new VTNMeterUtils(new MeterId(meterId), bandwidth, burst);

                                                   AddMeterInput addMeterInput = vtnMeterUtils.createAddMeterInput(srcNodeId);


                                                   Future&lt;RpcResult&lt;AddMeterOutput&gt;&gt; future = salMeterService.addMeter(addMeterInput);



                                                   if (future.get().isSuccessful()) {

                                                       first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, meterId, links, queues, srcVlan);

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                       Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                       if (flowResult.get().isSuccessful()) {
                                                           LOG.info(&quot;Flow successfully added&quot;);

                                                       } else {

                                                           LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                       }

                                                   } else {

                                                       LOG.error(&quot;Error with installing a meter: ----&gt; &quot; + future.get().getErrors());
                                                   }

                                               }

                                               Flow last = createDestinationFlowWithQueuesWithoutMeter(dstNodePort, matchingStructure, destVlan);


                                               listofFlowRequests.add(new EmbeddingFlowRequest(dstNodeId.getValue(), last.getCookie().getValue(), meterId, burst, bandwidth) );


                                               AddFlowInput destFlow = getAddFlowInputToSend(dstNodeId.getValue(), last);
                                               salFlowService.addFlow(destFlow);

                                               NodeConnectorId inPortFirst = new NodeConnectorId(links.get(0).get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);
                                               NodeConnectorId inPortSecond = new NodeConnectorId(links.get(1).get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);


                                               links.get(0).remove(links.get(0).get(0));
                                               links.get(1).remove(links.get(1).get(0));

                                               queues.get(0).remove(queues.get(0).get(0));
                                               queues.get(1).remove(queues.get(1).get(0));

                                               for (int i = 0; i &lt; links.size(); i++) {

                                                   List&lt;Link&gt; listOfLinks = links.get(i);
                                                   List&lt;Long&gt; queuesForLinkList = queues.get(i);

                                                   List&lt;Flow&gt; flows = new ArrayList&lt;&gt;();

                                                   if (i == 0) {
                                                       flows = createFlows(matchingStructure, listOfLinks, queuesForLinkList, inPortFirst);

                                                   } else {
                                                       flows = createFlows(matchingStructure, listOfLinks, queuesForLinkList, inPortSecond);
                                                   }


                                                   for (int j = 0; j &lt; flows.size(); j++) {


                                                       Flow createdFlow = flows.get(j);


                                                       // the first link should be ignored
                                                       String nodeId = listOfLinks.get(j)
                                                               .getSource().getSourceNode().getValue();

                                                       //get the add input flow to add to sal

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(nodeId, createdFlow.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput flow = getAddFlowInputToSend(nodeId, createdFlow);

                                                       LOG.info(&quot;Adding flows to salflow&quot;);

                                                       // add flow to sal
                                                       salFlowService.addFlow(flow);
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   }

                                               }


                                               IdToListMap.put(finalId, listofFlowRequests);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1285</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1470</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            LOG.info(&quot;endpoint match recieved is {}&quot; + endpointMatch.toString());

            LOG.info(&quot;meter is {}&quot; + meterId);
            LOG.info(&quot;source node is: {}  and port {} &quot; + srcNode.getValue() + srcNodePort.getValue());

            LOG.info(&quot;destination node is  {} and port is {}&quot; + destNode.getValue() + destNodePort.getValue());

            LOG.info(&quot;Physical path links on the path: &quot; + physicalPathLinks);

           // LOG.info(&quot;Source VLAN : &quot; + srcVlan.getValue() );
           // LOG.info(&quot;Dest VLAN: &quot; + destVlan.getValue());

            List&lt;EmbeddingFlowRequest&gt; listofFlowRequests = new ArrayList&lt;&gt;();

            Flow sourceFlowWithMeter = null;

            if (meterId == null) {
                sourceFlowWithMeter = createSourceFlowWithQueuesWithMeter(srcNodePort, endpointMatch, null, physicalPathLinks, queuesOnPath, srcVlan);
            } else {

                VTNMeterUtils vtnMeterUtils = new VTNMeterUtils(new MeterId(meterId), bandwidth, burst);

                AddMeterInput addMeterInput = vtnMeterUtils.createAddMeterInput(srcNode);


                Future&lt;RpcResult&lt;AddMeterOutput&gt;&gt; future = salMeterService.addMeter(addMeterInput);


                if (future.get().isSuccessful()) {
                    LOG.info(&quot;Meter &quot; + meterId + &quot;added successfully&quot;);
                    LOG.info(&quot;Creating Source flow with meter now&quot;);
                    sourceFlowWithMeter = createSourceFlowWithQueuesWithMeter(srcNodePort, endpointMatch, meterId, physicalPathLinks, queuesOnPath, srcVlan);
                    LOG.info(&quot;Source flow created on {} with port: {}&quot; + srcNode.getValue() + srcNodePort.getValue());

                } else {

                    LOG.error(&quot;Error with installing a meter: ----&gt; &quot; + future.get().getErrors());
                }

            }

            NodeConnectorId destNodeInPort = new NodeConnectorId(physicalPathLinks.get(physicalPathLinks.size() - 1).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);


            Flow destinationFlow = createDestinationFlowWithoutQueues(destNodePort, 0, 0, endpointMatch, destNodeInPort, destVlan); //createDestinationFlowWithQueuesWithoutMeter(destNodePort, endpointMatch);

            LOG.info(&quot;Destination flow created on {} with port: {}&quot; + destNode.getValue() + destNodePort.getValue());


            NodeConnectorId inPortForSecond = new NodeConnectorId(physicalPathLinks.get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);


            physicalPathLinks.remove(physicalPathLinks.get(0));
            queuesOnPath.remove(queuesOnPath.get(0));

            LOG.info(&quot;Link 1 and queue 1 removed and remaining sizes are: Queue List size {} , Links list Size {}&quot; + queuesOnPath.size() + &quot; &quot; + physicalPathLinks.size());

            System.out.println(&quot;Link 1 and queue 1 removed and remaining sizes are: Queue List size {} , Links list Size {}&quot; + queuesOnPath.size() + physicalPathLinks.size());


            List&lt;Flow&gt; flows = createFlows(endpointMatch, physicalPathLinks, queuesOnPath, inPortForSecond);


            if (sourceFlowWithMeter != null) {

                listofFlowRequests.add(new EmbeddingFlowRequest(srcNode.getValue(), sourceFlowWithMeter.getCookie().getValue(), meterId, burst, bandwidth));
                AddFlowInput srcFlow = getAddFlowInputToSend(srcNode.getValue(), sourceFlowWithMeter);
                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; resultFuture = salFlowService.addFlow(srcFlow);

                if (resultFuture.get().isSuccessful()) {
                    LOG.info(&quot;Source flow added successfully, The cookie is: &quot; + srcFlow.getCookie());
                } else {

                    LOG.info(&quot;Source Flow was not added successfully&quot;);
                    LOG.info(&quot;Error is: &quot; + resultFuture.get().getErrors().toString());
                }


            } else {

                LOG.info(&quot;Source flow is null, means meter installation was not successful&quot;);
                System.out.println(&quot;Meter Installation was not successful, hence not installing first flow&quot;);

            }


            listofFlowRequests.add(new EmbeddingFlowRequest(destNode.getValue(), destinationFlow.getCookie().getValue(), meterId, burst, bandwidth));


            AddFlowInput destFlow = getAddFlowInputToSend(destNode.getValue(), destinationFlow);
            salFlowService.addFlow(destFlow);

            LOG.info(&quot;Destination Flow added &quot; + destFlow.toString());


            for (int i = 0; i &lt; physicalPathLinks.size(); i++) {


                //the flow which was created
                Flow createdFlow = flows.get(i);

                String nodeId = physicalPathLinks.get(i)
                        .getSource().getSourceNode().getValue();

                //get the add input flow to add to sal

                LOG.info(&quot;Flow is being installed on &quot; + physicalPathLinks.get(0).getSource().getSourceTp().getValue());

                listofFlowRequests.add(new EmbeddingFlowRequest(nodeId, createdFlow.getCookie().getValue(), meterId, burst, bandwidth));

                AddFlowInput flow = getAddFlowInputToSend(nodeId, createdFlow);


                // add flow to sal
                salFlowService.addFlow(flow);
            }

            IdToListMap.put(id, listofFlowRequests);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>607</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>783</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                                               List&lt;EmbeddingFlowRequest&gt; listofFlowRequests = new ArrayList&lt;&gt;();


                                               Flow first = null;

                                               if (meterId == null) {

                                                   first = createBestEffortSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, null, links, srcVlan);

                                                   listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                   AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                   Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                   if (flowResult.get().isSuccessful()) {
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   } else {

                                                       LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                   }


                                               } else {


                                                   VTNMeterUtils vtnMeterUtils = new VTNMeterUtils(new MeterId(meterId), bandwidth, burst);

                                                   AddMeterInput addMeterInput = vtnMeterUtils.createAddMeterInput(srcNodeId);


                                                   Future&lt;RpcResult&lt;AddMeterOutput&gt;&gt; future = salMeterService.addMeter(addMeterInput);


                                                   if (future.get().isSuccessful()) {

                                                       first = createBestEffortSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, meterId, links, srcVlan);

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                       Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                       if (flowResult.get().isSuccessful()) {
                                                           LOG.info(&quot;Flow successfully added&quot;);

                                                       } else {

                                                           LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                       }

                                                   } else {

                                                       LOG.error(&quot;Error with installing a meter: ----&gt; &quot; + future.get().getErrors());
                                                   }

                                               }

                                               Flow last = createDestinationFlowWithQueuesWithoutMeter(dstNodePort, matchingStructure, destVlan);


                                               listofFlowRequests.add(new EmbeddingFlowRequest(dstNodeId.getValue(), last.getCookie().getValue(), meterId, burst, bandwidth));


                                               AddFlowInput destFlow = getAddFlowInputToSend(dstNodeId.getValue(), last);
                                               salFlowService.addFlow(destFlow);

                                               NodeConnectorId inPortFirst = new NodeConnectorId(links.get(0).get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);
                                               NodeConnectorId inPortSecond = new NodeConnectorId(links.get(1).get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);


                                               links.get(0).remove(links.get(0).get(0));
                                               links.get(1).remove(links.get(1).get(0));


                                               for (int i = 0; i &lt; links.size(); i++) {

                                                   List&lt;Link&gt; listOfLinks = links.get(i);

                                                   List&lt;Flow&gt; flows = new ArrayList&lt;&gt;();

                                                   if (i == 0) {
                                                       flows = createFlowsWithoutQueues(matchingStructure, listOfLinks, inPortFirst);

                                                   } else {
                                                       flows = createFlowsWithoutQueues(matchingStructure, listOfLinks, inPortSecond);
                                                   }


                                                   for (int j = 0; j &lt; flows.size(); j++) {


                                                       Flow createdFlow = flows.get(j);


                                                       // the first link should be ignored
                                                       String nodeId = listOfLinks.get(j)
                                                               .getSource().getSourceNode().getValue();

                                                       //get the add input flow to add to sal

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(nodeId, createdFlow.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput flow = getAddFlowInputToSend(nodeId, createdFlow);

                                                       LOG.info(&quot;Adding flows to salflow&quot;);

                                                       // add flow to sal
                                                       salFlowService.addFlow(flow);
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   }

                                               }


                                               IdToListMap.put(finalId, listofFlowRequests);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>916</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1097</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                                                                       Long meterId, List&lt;List&lt;Link&gt;&gt; links, List&lt;List&lt;Long&gt;&gt; queues, VlanId srcVlan) {
        FlowBuilder flowBuilder = new FlowBuilder()
                .setTableId((short) 0)
                .setFlowName(&quot;random&quot;);

        int pp = 0;


        //Flow ID
        flowBuilder.setId(new FlowId(Long.toString(flowBuilder.hashCode())));

        MatchBuilder matchBuilder = new MatchBuilder();

        matchBuilder.setEthernetMatch(match1.getEthernetMatch())
                .setLayer3Match(match1.getLayer3Match())
                .setInPort(srcNodeConnectorId);


        if (match1.getIpMatch() != null &amp;&amp; match1.getLayer4Match() != null) {

            //ip and layer 4 are not null
            matchBuilder.setIpMatch(match1.getIpMatch())
                    .setLayer4Match(match1.getLayer4Match());


        }
        if (match1.getVlanMatch() != null) {
            matchBuilder.setVlanMatch(match1.getVlanMatch());
        }


        Match match = matchBuilder
                .build();

        ActionBuilder actionBuilder = new ActionBuilder();

        //Actions
        //currently changing tos and sending to output connector


        List&lt;List&lt;Action&gt;&gt; listofactions = new ArrayList&lt;&gt;();

        listofactions.add(new ArrayList&lt;Action&gt;());


        String firstElemOfFirstList = links.get(0).get(0).getSource().getSourceTp().getValue().split(&quot;:&quot;)[2];

        String firstElemOfSecondList = links.get(1).get(0).getSource().getSourceTp().getValue().split(&quot;:&quot;)[2];


        if (srcVlan != null) {

            PopVlanActionCaseBuilder popVlanBuilder = new PopVlanActionCaseBuilder();
            popVlanBuilder.setPopVlanAction(new PopVlanActionBuilder().build());

            Action vlanAction = actionBuilder.setOrder(0).setAction(popVlanBuilder.build()).build();

            Action outputNodeConnectorActionsrcFirstList = actionBuilder
                    .setOrder(2).setAction(new OutputActionCaseBuilder()</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>282</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>461</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>644</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>819</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                                                       first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, meterId, links, queues, srcVlan);

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                       Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                       if (flowResult.get().isSuccessful()) {
                                                           LOG.info(&quot;Flow successfully added&quot;);

                                                       } else {

                                                           LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                       }

                                                   } else {

                                                       LOG.error(&quot;Error with installing a meter: ----&gt; &quot; + future.get().getErrors());
                                                   }

                                               }

                                               Flow last = createDestinationFlowWithQueuesWithoutMeter(dstNodePort, matchingStructure, destVlan);


                                               listofFlowRequests.add(new EmbeddingFlowRequest(dstNodeId.getValue(), last.getCookie().getValue(), meterId, burst, bandwidth) );


                                               AddFlowInput destFlow = getAddFlowInputToSend(dstNodeId.getValue(), last);
                                               salFlowService.addFlow(destFlow);

                                               NodeConnectorId inPortFirst = new NodeConnectorId(links.get(0).get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);
                                               NodeConnectorId inPortSecond = new NodeConnectorId(links.get(1).get(0).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);


                                               links.get(0).remove(links.get(0).get(0));
                                               links.get(1).remove(links.get(1).get(0));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/DataBrokerBuilder.java</td>
<td>42</td></tr>
<tr class="a">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/NotificationServiceBuilder.java</td>
<td>42</td></tr>
<tr class="b">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/RpcRegistryBuilder.java</td>
<td>42</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            AugmentationHolder&lt;org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker&gt; casted =(AugmentationHolder&lt;org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker&gt;) base;
            if (!casted.augmentations().isEmpty()) {
                this.augmentation = new HashMap&lt;&gt;(casted.augmentations());
            }
        }
    }

    /**
     *Set fields from given grouping argument. Valid argument is instance of one of following types:
     * &lt;ul&gt;
     * &lt;li&gt;org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.controller.config.rev130405.ServiceRef&lt;/li&gt;
     * &lt;/ul&gt;
     *
     * @param arg grouping object
     * @throws IllegalArgumentException if given argument is none of valid types
    */
    public void fieldsFrom(DataObject arg) {
        boolean isValidArg = false;
        if (arg instanceof org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.controller.config.rev130405.ServiceRef) {
            this._type = ((org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.controller.config.rev130405.ServiceRef)arg).getType();
            this._name = ((org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.controller.config.rev130405.ServiceRef)arg).getName();
            isValidArg = true;
        }
        if (!isValidArg) {
            throw new IllegalArgumentException(
              &quot;expected one of: [org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.controller.config.rev130405.ServiceRef] \n&quot; +
              &quot;but was: &quot; + arg
            );
        }
    }

    public java.lang.Object getName() {
        return _name;
    }
    
    public java.lang.Class&lt;? extends org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.controller.config.rev130405.ServiceType&gt; getType() {
        return _type;
    }
    
    @SuppressWarnings(&quot;unchecked&quot;)
    public &lt;E extends Augmentation&lt;org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker&gt;&gt; E getAugmentation(java.lang.Class&lt;E&gt; augmentationType) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1657</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1777</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                          List&lt;Link&gt; physicalPathLinks, List&lt;Long&gt; queuesOnPath, NodeConnectorId inPort
    ) {
        FlowBuilder flowBuilder = new FlowBuilder()
                .setTableId((short) 0)
                .setFlowName(&quot;random&quot;);

        //Flow ID
        flowBuilder.setId(new FlowId(Long.toString(flowBuilder.hashCode())));

        // TcpMatchBuilder tcpMatchBuilder = new TcpMatchBuilder().setTcpSourcePort(new PortNumber(sourcePort)).setTcpDestinationPort(new PortNumber(destPort));
        //IpMatchBuilder ipMatchBuilder = new IpMatchBuilder().setIpProtocol(protocol);

        MatchBuilder matchBuilder = new MatchBuilder();

        matchBuilder.setEthernetMatch(match1.getEthernetMatch())
                .setLayer3Match(match1.getLayer3Match());


        if (match1.getIpMatch() != null &amp;&amp; match1.getLayer4Match() != null) {

            //ip and layer 4 are not null
            matchBuilder.setIpMatch(match1.getIpMatch())
                    .setLayer4Match(match1.getLayer4Match());


        }
        if (match1.getVlanMatch() != null) {
            matchBuilder.setVlanMatch(match1.getVlanMatch());
        }


        ArrayList&lt;Match&gt; matches = new ArrayList&lt;&gt;();

        ActionBuilder actionBuilder = new ActionBuilder();


        List&lt;List&lt;Action&gt;&gt; listofactions = new ArrayList&lt;&gt;();

        for (int j = 0; j &lt; physicalPathLinks.size(); ++j) {
            listofactions.add(new ArrayList&lt;Action&gt;());
        }
        for (int i = 0; i &lt; physicalPathLinks.size(); i++) {

            NodeConnectorId inPortLocal = null;

            if (i == 0) {
                inPortLocal = inPort;
            } else {
                inPortLocal = new NodeConnectorId(physicalPathLinks.get(i - 1).getDestination().getDestTp().getValue().split(&quot;:&quot;)[2]);
            }

            matchBuilder.setInPort(inPortLocal);

            matches.add(matchBuilder.build());</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>759</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>809</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                Flow sourceFlow = createSourceFlow(meterID, srcIP, destIP, destPort, protocol, mplsLabel, IngressEdgeSwitchPort, failoverPort, resilientPathMplsLabel, IngressEdgeSwitchID, false, ingressRouteVlanId);


                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(IngressEdgeSwitchID, sourceFlow);


                listofFlowRequests.add(new EmbeddingFlowRequest(IngressEdgeSwitchID, sourceFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; future = salFlowService.addFlow(flowinputSrcNode);

                if (future.isDone() &amp;&amp; future.get().isSuccessful()) {
                    LOG.info(&quot;Ingress flow successfully installed&quot;);

                } else {

                    if (future.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Ingress Flow Installation unsuccessful and error is: \n&quot; + future.get().getErrors().toString());
                        return -1L;
                    }

                }


                String last = EgressEdgeSwitchID;
                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, true, egressRouteVlanId, null);

                AddFlowInput flowinputDestNode = getAddFlowInputToSend(last, destinationFlow);

                listofFlowRequests.add(new EmbeddingFlowRequest(last, destinationFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; futureEgreeFlow = salFlowService.addFlow(flowinputDestNode);

                if (futureEgreeFlow.isDone() &amp;&amp; futureEgreeFlow.get().isSuccessful()) {
                    LOG.info(&quot;Flow installation Successful: Eggress flow: &quot; + last);
                } else {

                    if (futureEgreeFlow.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Flow Installation unsuccessful: Egress error is: &quot; + futureEgreeFlow.get().getErrors().toString());
                        return -1L;
                    }

                }


            } else if (!isFinalDomain &amp;&amp; !isFinalDomain) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>856</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>901</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                Flow sourceFlow = createSourceFlow(meterID, srcIP, destIP, destPort, protocol, mplsLabel, IngressEdgeSwitchPort, failoverPort, resilientPathMplsLabel, IngressEdgeSwitchID, true, ingressRouteVlanId);


                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(IngressEdgeSwitchID, sourceFlow);


                listofFlowRequests.add(new EmbeddingFlowRequest(IngressEdgeSwitchID, sourceFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; future = salFlowService.addFlow(flowinputSrcNode);

                if (future.isDone() &amp;&amp; future.get().isSuccessful()) {
                    LOG.info(&quot;Ingress flow successfully installed&quot;);

                } else {

                    if (future.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Ingress Flow Installation unsuccessful and error is: \n&quot; + future.get().getErrors().toString());
                        return -1L;
                    }

                }


                String last = EgressEdgeSwitchID;
                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, false, egressRouteVlanId, destMac);

                AddFlowInput flowinputDestNode = getAddFlowInputToSend(last, destinationFlow);

                listofFlowRequests.add(new EmbeddingFlowRequest(last, destinationFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; futureEgreeFlow = salFlowService.addFlow(flowinputDestNode);

                if (futureEgreeFlow.isDone() &amp;&amp; futureEgreeFlow.get().isSuccessful()) {
                    LOG.info(&quot;Flow installation Successful: Eggress flow: &quot; + last);
                } else {
                    if (futureEgreeFlow.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Flow Installation unsuccessful: Egress error is: &quot; + futureEgreeFlow.get().getErrors().toString());
                        return -1L;
                    }
                }

            } else if (isFinalDomain &amp;&amp; isFirstDomain) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>137</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>3102</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        listOfEmbeddingId = ResourceManagerRegistryImpl.getInstance().readAllResourceManagerDatastore();

        if(listOfEmbeddingId != null) {
            Long presentId = 0L;
            Long pastId = 0L;

            List&lt;EmbeddingFlowRequest&gt; allRequests = new ArrayList&lt;&gt;();


            for(int i = 0; i&lt;listOfEmbeddingId.size(); ++i ) {

                //EmbeddingIdCookie

                if(i == 0) {
                    pastId = listOfEmbeddingId.get(i).getEmbeddingId();
                } else {
                    pastId = listOfEmbeddingId.get(i-1).getEmbeddingId();
                }

                presentId = listOfEmbeddingId.get(i).getEmbeddingId();
                Long cookie = listOfEmbeddingId.get(i).getFlowCookie();
                String switchId = listOfEmbeddingId.get(i).getFlowSwitchId();
                Long meterId = listOfEmbeddingId.get(i).getMeterId();
                Long burst = listOfEmbeddingId.get(i).getMeterBurst();
                Long bandwidth = listOfEmbeddingId.get(i).getMeterBandwidth();

                allRequests.add(new EmbeddingFlowRequest(switchId, BigInteger.valueOf(cookie), meterId, burst, bandwidth));

                if(!presentId.equals(pastId) &amp;&amp; i != listOfEmbeddingId.size()-1 ) {
                    //finished one id, reset
                    IdToListMap.put(pastId, allRequests);
                    allRequests.clear();
                } else if(i == listOfEmbeddingId.size()-1) {
                    //last element, must be added to the list
                    IdToListMap.put(presentId, allRequests);
                    allRequests.clear();
                }





            }


        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1035</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1199</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            listofactions.get(0).add(queueAction);

            //ApplyActions
        }

        LOG.info(&quot;applying action&quot;);
        ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(0)).build();

        //Instruction
        Instruction applyActionsInstruction = new InstructionBuilder() //
                .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                        .setApplyActions(applyActions) //
                        .build())

                .build();

        List&lt;Instruction&gt; instructionList = new ArrayList&lt;&gt;();

        if (meterId == null) {

            instructionList.add(applyActionsInstruction);


        } else {

            Instruction meterInstruction = new InstructionBuilder()
                    .setOrder(1).setInstruction((new MeterCaseBuilder()
                            .setMeter(new MeterBuilder()
                                    .setMeterId(new MeterId(meterId))
                                    .build())
                            .build()))
                    .build();


            instructionList.add(applyActionsInstruction);
            instructionList.add(meterInstruction);

        }


        Instructions applyInstructions = new InstructionsBuilder()
                .setInstruction(instructionList)
                .build();


        // Put our Instruction in a list of Instructions

        LOG.info(&quot;adding flow&quot;);
        Flow flow = flowBuilder
                .setMatch(match)
                .setBufferId(OFConstants.OFP_NO_BUFFER)
                .setInstructions(applyInstructions)
                .setPriority(1000)
                .setCookie(new FlowCookie(BigInteger.valueOf(flowCookieInc.getAndIncrement())))
                .setFlags(new FlowModFlags(false, false, false, false, false)).build();

        return flow;
    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>462</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1717</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                    .setQueueId(queue)
                                    .build())
                            .build())

                    .build();

            String outputNodeConnector = physicalPathLinks.get(i).getSource().getSourceTp().getValue().split(&quot;:&quot;)[2];
            LOG.info(&quot;setting OutputNodeConnector = &quot; + outputNodeConnector);

            Action outputNodeConnectorAction = actionBuilder
                    .setOrder(1).setAction(new OutputActionCaseBuilder()
                            .setOutputAction(new OutputActionBuilder()
                                    .setOutputNodeConnector(new Uri(outputNodeConnector))
                                    .build())
                            .build())
                    .build();


            listofactions.get(i).add(queueAction);
            listofactions.get(i).add(outputNodeConnectorAction);

        }


        //ApplyActions

        List&lt;Flow&gt; flows = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; listofactions.size(); i++) {

            ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(i)).build();

            //Instruction
            Instruction applyActionsInstruction = new InstructionBuilder() //
                    .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                            .setApplyActions(applyActions) //
                            .build())

                    .build();

            Instructions applyInstructions = new InstructionsBuilder()
                    .setInstruction(ImmutableList.of(applyActionsInstruction))
                    .build();


            flows.add(flowBuilder
                    .setMatch(match)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2542</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2857</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                    .build();


            listofactions.get(0).add(outputNodeConnectorActionsrc);

        }
        //ApplyActions


        LOG.info(&quot;applying action&quot;);
        ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(0)).build();

        //Instruction
        Instruction applyActionsInstruction = new InstructionBuilder() //
                .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                        .setApplyActions(applyActions) //
                        .build())

                .build();

        List&lt;Instruction&gt; instructionList = new ArrayList&lt;&gt;();

        if (meterId == null) {

            instructionList.add(applyActionsInstruction);

        } else {

            Instruction meterInstruction = new InstructionBuilder().setOrder(1).setInstruction((new MeterCaseBuilder()
                    .setMeter(new MeterBuilder()
                            .setMeterId(new MeterId(meterId))
                            .build())
                    .build()))
                    .build();


            instructionList.add(applyActionsInstruction);
            instructionList.add(meterInstruction);

        }


        Instructions applyInstructions = new InstructionsBuilder()
                .setInstruction(instructionList)
                .build();


        // Put our Instruction in a list of Instructions

        LOG.info(&quot;adding flow&quot;);
        Flow flow = flowBuilder
                .setMatch(match)
                .setBufferId(OFConstants.OFP_NO_BUFFER)
                .setInstructions(applyInstructions)
                .setPriority(1000)
                .setHardTimeout(hardtimeout)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>335</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>694</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                                       flows = createFlows(matchingStructure, listOfLinks, queuesForLinkList, inPortSecond);
                                                   }


                                                   for (int j = 0; j &lt; flows.size(); j++) {


                                                       Flow createdFlow = flows.get(j);


                                                       // the first link should be ignored
                                                       String nodeId = listOfLinks.get(j)
                                                               .getSource().getSourceNode().getValue();

                                                       //get the add input flow to add to sal

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(nodeId, createdFlow.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput flow = getAddFlowInputToSend(nodeId, createdFlow);

                                                       LOG.info(&quot;Adding flows to salflow&quot;);

                                                       // add flow to sal
                                                       salFlowService.addFlow(flow);
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   }

                                               }


                                               IdToListMap.put(finalId, listofFlowRequests);

                                               populateEmbeddingId(finalId, listofFlowRequests);


                                           } catch (Exception e) {
                                               LOG.error(&quot;Exception Thrown by Resource Manager Disjoint Flows&quot;);
                                               e.printStackTrace();

                                           }


                                           timer.schedule(new TimerTask() {
                                               @Override
                                               public void run() {
                                                   removePath(finalId);
                                               }
                                           }, endDate);


                                       }
                                   }
                            , startDate);

                }
            }).start();

            return finalId;


        } catch (Exception e) {
            LOG.error(&quot;Exception Thrown by Resource Manager Disjoint Flows&quot;);
            e.printStackTrace();
            return -1L;
        }


    }

    public static Long createDisjointFlows(org.opendaylight.yang.gen.v1.urn.opendaylight.model.match.types.rev131026.Match matchingStructure,</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1035</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1199</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2545</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2858</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            listofactions.get(0).add(queueAction);

            //ApplyActions
        }

        LOG.info(&quot;applying action&quot;);
        ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(0)).build();

        //Instruction
        Instruction applyActionsInstruction = new InstructionBuilder() //
                .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                        .setApplyActions(applyActions) //
                        .build())

                .build();

        List&lt;Instruction&gt; instructionList = new ArrayList&lt;&gt;();

        if (meterId == null) {

            instructionList.add(applyActionsInstruction);


        } else {

            Instruction meterInstruction = new InstructionBuilder()
                    .setOrder(1).setInstruction((new MeterCaseBuilder()
                            .setMeter(new MeterBuilder()
                                    .setMeterId(new MeterId(meterId))
                                    .build())
                            .build()))
                    .build();


            instructionList.add(applyActionsInstruction);
            instructionList.add(meterInstruction);

        }


        Instructions applyInstructions = new InstructionsBuilder()
                .setInstruction(instructionList)
                .build();


        // Put our Instruction in a list of Instructions

        LOG.info(&quot;adding flow&quot;);
        Flow flow = flowBuilder
                .setMatch(match)
                .setBufferId(OFConstants.OFP_NO_BUFFER)
                .setInstructions(applyInstructions)
                .setPriority(1000)
                .setCookie(new FlowCookie(BigInteger.valueOf(flowCookieInc.getAndIncrement())))</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1735</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1842</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            listofactions.get(i).add(queueAction);
            listofactions.get(i).add(outputNodeConnectorAction);

        }


        //ApplyActions

        List&lt;Flow&gt; flows = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; listofactions.size(); i++) {

            ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(i)).build();

            //Instruction
            Instruction applyActionsInstruction = new InstructionBuilder() //
                    .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                            .setApplyActions(applyActions) //
                            .build())

                    .build();

            Instructions applyInstructions = new InstructionsBuilder()
                    .setInstruction(ImmutableList.of(applyActionsInstruction))
                    .build();


            flows.add(flowBuilder
                    .setMatch(matches.get(i))
                    .setBufferId(OFConstants.OFP_NO_BUFFER)
                    .setInstructions(applyInstructions)
                    .setPriority(1000)
                    .setHardTimeout(0)
                    .setIdleTimeout(0)
                    .setCookie(new FlowCookie(BigInteger.valueOf(flowCookieInc.getAndIncrement())))
                    .setFlags(new FlowModFlags(false, false, false, false, false)).build());


        }
        return flows;
    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/DataBrokerBuilder.java</td>
<td>164</td></tr>
<tr class="b">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/NotificationServiceBuilder.java</td>
<td>164</td></tr>
<tr class="a">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/RpcRegistryBuilder.java</td>
<td>164</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        public &lt;E extends Augmentation&lt;org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker&gt;&gt; E getAugmentation(java.lang.Class&lt;E&gt; augmentationType) {
            if (augmentationType == null) {
                throw new IllegalArgumentException(&quot;Augmentation Type reference cannot be NULL!&quot;);
            }
            return (E) augmentation.get(augmentationType);
        }

        private int hash = 0;
        private volatile boolean hashValid = false;
        
        @Override
        public int hashCode() {
            if (hashValid) {
                return hash;
            }
        
            final int prime = 31;
            int result = 1;
            result = prime * result + Objects.hashCode(_name);
            result = prime * result + Objects.hashCode(_type);
            result = prime * result + Objects.hashCode(augmentation);
        
            hash = result;
            hashValid = true;
            return result;
        }

        @Override
        public boolean equals(java.lang.Object obj) {
            if (this == obj) {
                return true;
            }
            if (!(obj instanceof DataObject)) {
                return false;
            }
            if (!org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker.class.equals(((DataObject)obj).getImplementedInterface())) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1900</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>3163</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    private RemoveFlowInput getRemoveFlowInput(List&lt;EmbeddingFlowRequest&gt; allRequests, int i) {
        Flow flowtoDelete = populateFlowRemoveStructure(new FlowCookie(allRequests.get(i).getFlowCookie()));

        String edge_switch = allRequests.get(i).getNode_id();

        //identify the flow
        InstanceIdentifier&lt;Flow&gt; flowPath = InstanceIdentifier
                .builder(Nodes.class)
                .child(Node.class, new NodeKey(new NodeId(edge_switch)))
                .augmentation(FlowCapableNode.class)
                .child(Table.class, new TableKey(flowtoDelete.getTableId()))
                .child(Flow.class, new FlowKey(flowtoDelete.getId())).build();


        RemoveFlowInputBuilder b = new RemoveFlowInputBuilder(flowtoDelete);
        InstanceIdentifier&lt;Table&gt; tableInstanceId = flowPath
                .&lt;Table&gt;firstIdentifierOf(Table.class);
        InstanceIdentifier&lt;Node&gt; nodeInstanceId = flowPath
                .&lt;Node&gt;firstIdentifierOf(Node.class);
        b.setNode(new NodeRef(nodeInstanceId));
        b.setFlowTable(new FlowTableRef(tableInstanceId));
        b.setTransactionUri(new Uri(flowtoDelete.getId().getValue()));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>525</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1635</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    private AddFlowInput getAddFlowInputToSend(String edge_switch, Flow createdFlow) {
        InstanceIdentifier&lt;Flow&gt; flowPath = InstanceIdentifier
                .builder(Nodes.class)
                .child(Node.class, new NodeKey(new NodeId(edge_switch)))
                .augmentation(FlowCapableNode.class)
                .child(Table.class, new TableKey(createdFlow.getTableId()))
                .child(Flow.class, new FlowKey(createdFlow.getId())).build();


        final AddFlowInputBuilder builder = new AddFlowInputBuilder(createdFlow);
        final InstanceIdentifier&lt;Table&gt; tableInstanceId = flowPath
                .&lt;Table&gt;firstIdentifierOf(Table.class);
        final InstanceIdentifier&lt;Node&gt; nodeInstanceId = flowPath
                .&lt;Node&gt;firstIdentifierOf(Node.class);
        builder.setNode(new NodeRef(nodeInstanceId));
        builder.setFlowTable(new FlowTableRef(tableInstanceId));
        builder.setTransactionUri(new Uri(createdFlow.getId().getValue()));
        return builder.build();
    }


    /**
     * Method to create flows
     * @param physicalPathLinks - the links for which the flows should be created
     * @param queue - the queue to be used, 0-7 allowed
     * @param mplsLabel - mpls label to be used
     * @param resillientMPLSLabel - resillient mpls label
     * @return List&lt;Flows&gt; the created flows
     */
    private List&lt;Flow&gt; createFlows(List&lt;LinkWithFailoverPort&gt; physicalPathLinks, Long queue, Long mplsLabel, Long resillientMPLSLabel</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1258</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1413</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    }


    public static Long createAndSendFlow(org.opendaylight.yang.gen.v1.urn.opendaylight.model.match.types.rev131026.Match endpointMatch,
                                         List&lt;org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Link&gt; physicalPathLinks,
                                         List&lt;Long&gt; queuesOnPath,
                                         Long meterId,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeId srcNode,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeId destNode,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeConnectorId srcNodePort,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeConnectorId destNodePort,
                                         Long bandwidth,
                                         Long burst,
                                         VlanId srcVlan,
                                         VlanId destVlan</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1883</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2065</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    }


    public static Long bestembededflow(
            org.opendaylight.yang.gen.v1.urn.opendaylight.model.match.types.rev131026.Match endpointMatch,
            List&lt;org.opendaylight.yang.gen.v1.urn.tbd.params.xml.ns.yang.network.topology.rev131021.network.topology.topology.Link&gt; physicalPathLinks,
            Integer idletimeout, Integer hardtimeout,
            Long meter,
            org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeId srcNode,
            org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeId destNode,
            org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeConnectorId srcNodePort,
            org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeConnectorId destNodePort,
            Long bandwidth,
            Long burst,
            VlanId srcVlan,
            VlanId destVlan</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>193</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>560</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                                           List&lt;List&lt;Long&gt;&gt; queues,
                                           Long meterId,
                                           NodeId srcNodeId, NodeId dstNodeId,
                                           NodeConnectorId srcNodePort, NodeConnectorId dstNodePort,
                                           Long bandwidth,
                                           Long burst,
                                           VlanId srcVlan,
                                           VlanId destVlan,
                                           Timestamp startTime,
                                           Timestamp endTime
    ) {


        try {


            // System.out.println(startTime.getValue());

            ++id;

            final Long finalId = id;

            String formattedStartTime = startTime.getValue().substring(0, 19);
            String formattedEndTime = endTime.getValue().substring(0, 19);




            DateFormat dateFormatter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);
            Date startDate = dateFormatter.parse(formattedStartTime); //&quot;2012-07-06 13:05:45&quot;
            Date endDate = dateFormatter.parse(formattedEndTime); //&quot;2012-07-06 13:05:45&quot;

            //Now create the time and schedule it
            Timer timer = new Timer();

            new Thread(new Runnable() {
                @Override
                public void run() {
                    timer.schedule(new TimerTask() {
                                       @Override
                                       public void run() {

                                           // final Long pathId = createDisjointFlows(matchingStructure, links, queues, meterId, srcNodeId, dstNodeId, srcNodePort, dstNodePort, burst, bandwidth, srcVlan, destVlan);

                                           try {



                                               //	System.out.println(&quot;createDisjointFlows called&quot;);


                                               List&lt;EmbeddingFlowRequest&gt; listofFlowRequests = new ArrayList&lt;&gt;();


                                               Flow first = null;
                                               if (meterId == null) {

                                                   first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, null, links, queues, srcVlan);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>250</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>430</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>614</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>790</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                                                   first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, null, links, queues, srcVlan);

                                                   listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                   AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                   Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                   if (flowResult.get().isSuccessful()) {
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   } else {

                                                       LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                   }


                                               } else {



                                                   VTNMeterUtils vtnMeterUtils = new VTNMeterUtils(new MeterId(meterId), bandwidth, burst);

                                                   AddMeterInput addMeterInput = vtnMeterUtils.createAddMeterInput(srcNodeId);


                                                   Future&lt;RpcResult&lt;AddMeterOutput&gt;&gt; future = salMeterService.addMeter(addMeterInput);



                                                   if (future.get().isSuccessful()) {

                                                       first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, meterId, links, queues, srcVlan);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>805</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>853</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            } else if (!isFinalDomain &amp;&amp; !isFinalDomain) {


                //ip and other fields are passed here but ignored inside the method
                Flow sourceFlow = createSourceFlow(meterID, srcIP, destIP, destPort, protocol, mplsLabel, IngressEdgeSwitchPort, failoverPort, resilientPathMplsLabel, IngressEdgeSwitchID, true, ingressRouteVlanId);


                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(IngressEdgeSwitchID, sourceFlow);


                listofFlowRequests.add(new EmbeddingFlowRequest(IngressEdgeSwitchID, sourceFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; future = salFlowService.addFlow(flowinputSrcNode);

                if (future.isDone() &amp;&amp; future.get().isSuccessful()) {
                    LOG.info(&quot;Ingress flow successfully installed&quot;);

                } else {

                    if (future.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Ingress Flow Installation unsuccessful and error is: \n&quot; + future.get().getErrors().toString());
                        return -1L;
                    }

                }


                String last = EgressEdgeSwitchID;
                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, true, egressRouteVlanId, null);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>756</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>899</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            if (isFirstDomain &amp;&amp; !isFinalDomain) {


                Flow sourceFlow = createSourceFlow(meterID, srcIP, destIP, destPort, protocol, mplsLabel, IngressEdgeSwitchPort, failoverPort, resilientPathMplsLabel, IngressEdgeSwitchID, false, ingressRouteVlanId);


                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(IngressEdgeSwitchID, sourceFlow);


                listofFlowRequests.add(new EmbeddingFlowRequest(IngressEdgeSwitchID, sourceFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; future = salFlowService.addFlow(flowinputSrcNode);

                if (future.isDone() &amp;&amp; future.get().isSuccessful()) {
                    LOG.info(&quot;Ingress flow successfully installed&quot;);

                } else {

                    if (future.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Ingress Flow Installation unsuccessful and error is: \n&quot; + future.get().getErrors().toString());
                        return -1L;
                    }

                }


                String last = EgressEdgeSwitchID;
                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, true, egressRouteVlanId, null);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/DataBrokerBuilder.java</td>
<td>145</td></tr>
<tr class="a">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/NotificationServiceBuilder.java</td>
<td>145</td></tr>
<tr class="b">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/RpcRegistryBuilder.java</td>
<td>145</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                this.augmentation = Collections.&lt;java.lang.Class&lt;? extends Augmentation&lt;org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker&gt;&gt;, Augmentation&lt;org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker&gt;&gt;singletonMap(e.getKey(), e.getValue());
                break;
            default :
                this.augmentation = new HashMap&lt;&gt;(base.augmentation);
            }
        }

        @Override
        public java.lang.Object getName() {
            return _name;
        }
        
        @Override
        public java.lang.Class&lt;? extends org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.controller.config.rev130405.ServiceType&gt; getType() {
            return _type;
        }
        
        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public &lt;E extends Augmentation&lt;org.opendaylight.yang.gen.v1.urn.eu.virtuwind.resourcemanager.impl.rev161017.modules.module.configuration.resourcemanager.impl.DataBroker&gt;&gt; E getAugmentation(java.lang.Class&lt;E&gt; augmentationType) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>514</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>869</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                    flows = createFlows(matchingStructure, listOfLinks, queuesForLinkList, inPortSecond);
                }


                for (int j = 0; j &lt; flows.size(); j++) {


                    Flow createdFlow = flows.get(j);


                    // the first link should be ignored
                    String nodeId = listOfLinks.get(j)
                            .getSource().getSourceNode().getValue();

                    //get the add input flow to add to sal

                    listofFlowRequests.add(new EmbeddingFlowRequest(nodeId, createdFlow.getCookie().getValue(), meterId, burst, bandwidth));

                    AddFlowInput flow = getAddFlowInputToSend(nodeId, createdFlow);

                    LOG.info(&quot;Adding flows to salflow&quot;);

                    // add flow to sal
                    salFlowService.addFlow(flow);
                    LOG.info(&quot;Flow successfully added&quot;);

                }

            }


            IdToListMap.put(id, listofFlowRequests);
            populateEmbeddingId(id, listofFlowRequests);

            return id;

        } catch (Exception e) {
            LOG.error(&quot;Exception Thrown by Resource Manager Disjoint Flows&quot;);
            e.printStackTrace();
            return null;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>759</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>856</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                Flow sourceFlow = createSourceFlow(meterID, srcIP, destIP, destPort, protocol, mplsLabel, IngressEdgeSwitchPort, failoverPort, resilientPathMplsLabel, IngressEdgeSwitchID, false, ingressRouteVlanId);


                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(IngressEdgeSwitchID, sourceFlow);


                listofFlowRequests.add(new EmbeddingFlowRequest(IngressEdgeSwitchID, sourceFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; future = salFlowService.addFlow(flowinputSrcNode);

                if (future.isDone() &amp;&amp; future.get().isSuccessful()) {
                    LOG.info(&quot;Ingress flow successfully installed&quot;);

                } else {

                    if (future.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Ingress Flow Installation unsuccessful and error is: \n&quot; + future.get().getErrors().toString());
                        return -1L;
                    }

                }


                String last = EgressEdgeSwitchID;
                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, true, egressRouteVlanId, null);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>809</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>901</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                Flow sourceFlow = createSourceFlow(meterID, srcIP, destIP, destPort, protocol, mplsLabel, IngressEdgeSwitchPort, failoverPort, resilientPathMplsLabel, IngressEdgeSwitchID, true, ingressRouteVlanId);


                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(IngressEdgeSwitchID, sourceFlow);


                listofFlowRequests.add(new EmbeddingFlowRequest(IngressEdgeSwitchID, sourceFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; future = salFlowService.addFlow(flowinputSrcNode);

                if (future.isDone() &amp;&amp; future.get().isSuccessful()) {
                    LOG.info(&quot;Ingress flow successfully installed&quot;);

                } else {

                    if (future.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Ingress Flow Installation unsuccessful and error is: \n&quot; + future.get().getErrors().toString());
                        return -1L;
                    }

                }


                String last = EgressEdgeSwitchID;
                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, true, egressRouteVlanId, null);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2475</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2626</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                .setInPort(temp);


        if (match1.getIpMatch() != null &amp;&amp; match1.getLayer4Match() != null) {

            //ip and layer 4 are not null
            matchBuilder.setIpMatch(match1.getIpMatch())
                    .setLayer4Match(match1.getLayer4Match());


        }
        if (match1.getVlanMatch() != null) {
            matchBuilder.setVlanMatch(match1.getVlanMatch());
        }


        Match match = matchBuilder
                .build();

        ActionBuilder actionBuilder = new ActionBuilder();
        List&lt;Action&gt; actions = new ArrayList&lt;Action&gt;();

        //Actions
        //currently changing tos and sending to output connector


        List&lt;List&lt;Action&gt;&gt; listofactions = new ArrayList&lt;&gt;();

        for (int j = 0; j &lt; 1; ++j) {
            listofactions.add(new ArrayList&lt;Action&gt;());
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>491</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>664</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(i)).build();

            //Instruction
            Instruction applyActionsInstruction = new InstructionBuilder() //
                    .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                            .setApplyActions(applyActions) //
                            .build())

                    .build();

            Instructions applyInstructions = new InstructionsBuilder()
                    .setInstruction(ImmutableList.of(applyActionsInstruction))
                    .build();


            flows.add(flowBuilder
                    .setMatch(match)
                    .setBufferId(OFConstants.OFP_NO_BUFFER)
                    .setInstructions(applyInstructions)
                    .setPriority(1000)
                    .setCookie(new FlowCookie(BigInteger.valueOf(flowCookieInc.getAndIncrement())))
                    .setFlags(new FlowModFlags(false, false, false, false, false)).build());

        }
        return flows;
    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1778</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1847</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            for (int i = 0; i &lt; allRequests.size(); i++) {

                RemoveFlowInput flow = getRemoveFlowInput(allRequests, i);

                // remove flow from sal
                Future&lt;RpcResult&lt;RemoveFlowOutput&gt;&gt; future = salFlowService.removeFlow(flow);

                try {
                    if (future.get().isSuccessful()) {
                        LOG.info(&quot;Flow removal successful and flow was: &quot; + flow.getCookie() + &quot;   on node &quot; + flow.getNode());
                    } else {
                        LOG.info(&quot;!!!!Flow removal Unsuccessful and flow was: &quot; + flow.getCookie() + &quot;   on node &quot; + flow.getNode() + &quot;\n and errors are:  &quot; + future.get().getErrors().toString());

                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2846</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>3040</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                    .build();

            Action outputNodeConnectorActionsrc = actionBuilder
                    .setOrder(1).setAction(new OutputActionCaseBuilder()
                            .setOutputAction(new OutputActionBuilder()
                                    .setOutputNodeConnector(new Uri(outputNodeConnector))
                                    .build())
                            .build())
                    .build();


            listofactions.get(0).add(queueAction);
            listofactions.get(0).add(outputNodeConnectorActionsrc);
        }

        //ApplyActions


        LOG.info(&quot;applying action&quot;);
        ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(0)).build();

        //Instruction
        Instruction applyActionsInstruction = new InstructionBuilder() //
                .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                        .setApplyActions(applyActions) //
                        .build())

                .build();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2658</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2971</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        if (destVlan != null) {


            PushVlanActionCaseBuilder pushVlanActionCaseBuilder = new PushVlanActionCaseBuilder();


            Action pushVlanAction = actionBuilder.setOrder(0).setAction(
                    pushVlanActionCaseBuilder.setPushVlanAction(new PushVlanActionBuilder().setEthernetType(0x8100)
                            .build()).build()
            ).build();

            Action setVlanIdAction = actionBuilder
                    .setOrder(1).setAction(new SetFieldCaseBuilder()
                            .setSetField(new SetFieldBuilder()
                                    .setVlanMatch(new VlanMatchBuilder()
                                            .setVlanId(new VlanIdBuilder()
                                                    .setVlanId(new VlanId(destVlan))
                                                    .setVlanIdPresent(true)
                                                    .build())
                                            .build())
                                    .build())
                            .build())
                    .build();



            Action outputNodeConnectorActionsrc = actionBuilder</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2704</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>3050</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                    .build();


            listofactions.get(0).add(outputNodeConnectorActionsrc);

        }

        //ApplyActions


        LOG.info(&quot;applying action&quot;);
        ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(0)).build();

        //Instruction
        Instruction applyActionsInstruction = new InstructionBuilder() //
                .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                        .setApplyActions(applyActions) //
                        .build())

                .build();


        Instructions applyInstructions = new InstructionsBuilder()
                .setInstruction(ImmutableList.of(applyActionsInstruction))
                .build();


        // Put our Instruction in a list of Instructions

        LOG.info(&quot;adding flow&quot;);
        Flow flow = flowBuilder
                .setMatch(match)
                .setBufferId(OFConstants.OFP_NO_BUFFER)
                .setInstructions(applyInstructions)
                .setPriority(1000)
                .setHardTimeout(hardtimeout)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/DataBrokerBuilder.java</td>
<td>232</td></tr>
<tr class="b">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/NotificationServiceBuilder.java</td>
<td>232</td></tr>
<tr class="a">
<td>org/opendaylight/yang/gen/v1/urn/eu/virtuwind/resourcemanager/impl/rev161017/modules/module/configuration/resourcemanager/impl/RpcRegistryBuilder.java</td>
<td>232</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            java.lang.StringBuilder builder = new java.lang.StringBuilder (&quot;DataBroker [&quot;);
            boolean first = true;
        
            if (_name != null) {
                if (first) {
                    first = false;
                } else {
                    builder.append(&quot;, &quot;);
                }
                builder.append(&quot;_name=&quot;);
                builder.append(_name);
             }
            if (_type != null) {
                if (first) {
                    first = false;
                } else {
                    builder.append(&quot;, &quot;);
                }
                builder.append(&quot;_type=&quot;);
                builder.append(_type);
             }
            if (first) {
                first = false;
            } else {
                builder.append(&quot;, &quot;);
            }
            builder.append(&quot;augmentation=&quot;);
            builder.append(augmentation.values());
            return builder.append(']').toString();
        }
    }

}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>196</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>563</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1423</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                           NodeConnectorId srcNodePort, NodeConnectorId dstNodePort,
                                           Long bandwidth,
                                           Long burst,
                                           VlanId srcVlan,
                                           VlanId destVlan,
                                           Timestamp startTime,
                                           Timestamp endTime
    ) {


        try {


            // System.out.println(startTime.getValue());

            ++id;

            final Long finalId = id;

            String formattedStartTime = startTime.getValue().substring(0, 19);
            String formattedEndTime = endTime.getValue().substring(0, 19);




            DateFormat dateFormatter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);
            Date startDate = dateFormatter.parse(formattedStartTime); //&quot;2012-07-06 13:05:45&quot;
            Date endDate = dateFormatter.parse(formattedEndTime); //&quot;2012-07-06 13:05:45&quot;

            //Now create the time and schedule it
            Timer timer = new Timer();

            new Thread(new Runnable() {
                @Override
                public void run() {
                    timer.schedule(new TimerTask() {
                                       @Override
                                       public void run() {

                                           // final Long pathId = createDisjointFlows(matchingStructure, links, queues, meterId, srcNodeId, dstNodeId, srcNodePort, dstNodePort, burst, bandwidth, srcVlan, destVlan);

                                           try {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>480</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1842</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            listofactions.get(i).add(queueAction);
            listofactions.get(i).add(outputNodeConnectorAction);

        }


        //ApplyActions

        List&lt;Flow&gt; flows = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; listofactions.size(); i++) {

            ApplyActions applyActions = new ApplyActionsBuilder().setAction(listofactions.get(i)).build();

            //Instruction
            Instruction applyActionsInstruction = new InstructionBuilder() //
                    .setOrder(0).setInstruction(new ApplyActionsCaseBuilder()//
                            .setApplyActions(applyActions) //
                            .build())

                    .build();

            Instructions applyInstructions = new InstructionsBuilder()
                    .setInstruction(ImmutableList.of(applyActionsInstruction))
                    .build();


            flows.add(flowBuilder
                    .setMatch(match)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>784</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>834</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>881</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, true, egressRouteVlanId, null);

                AddFlowInput flowinputDestNode = getAddFlowInputToSend(last, destinationFlow);

                listofFlowRequests.add(new EmbeddingFlowRequest(last, destinationFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; futureEgreeFlow = salFlowService.addFlow(flowinputDestNode);

                if (futureEgreeFlow.isDone() &amp;&amp; futureEgreeFlow.get().isSuccessful()) {
                    LOG.info(&quot;Flow installation Successful: Eggress flow: &quot; + last);
                } else {

                    if (futureEgreeFlow.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Flow Installation unsuccessful: Egress error is: &quot; + futureEgreeFlow.get().getErrors().toString());
                        return -1L;
                    }

                }


            } else if (!isFinalDomain &amp;&amp; !isFinalDomain) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1798</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1866</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            if (removeGroupInput != null) {
                Future&lt;RpcResult&lt;RemoveGroupOutput&gt;&gt; future = salGroupService.removeGroup(removeGroupInput);

                try {
                    if (future.get().isSuccessful()) {
                        LOG.info(&quot;Removing group successful and Group was: &quot; + removeGroupInput.getGroupId() + &quot; on switch :&quot; + removeGroupInput.getNode().getValue());
                    } else {
                        LOG.info(&quot;!!!Removing group Unsuccessful and Group was: &quot; + removeGroupInput.getGroupId() + &quot; on switch :&quot; + removeGroupInput.getNode().getValue() + &quot;\n and errors are &quot; + future.get().getErrors().toString());
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }


        } else {

            //no path found hence nothing to delete

            return false;
        }

        // all flows successfully removed
        return true;

    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>784</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>834</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>926</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                Flow destinationFlow = createEgressFlow(mplsLabel, EgressEdgeSwitchPort, true, egressRouteVlanId, null);

                AddFlowInput flowinputDestNode = getAddFlowInputToSend(last, destinationFlow);

                listofFlowRequests.add(new EmbeddingFlowRequest(last, destinationFlow.getCookie().getValue()));


                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; futureEgreeFlow = salFlowService.addFlow(flowinputDestNode);

                if (futureEgreeFlow.isDone() &amp;&amp; futureEgreeFlow.get().isSuccessful()) {
                    LOG.info(&quot;Flow installation Successful: Eggress flow: &quot; + last);
                } else {

                    if (futureEgreeFlow.get().getErrors().size() &gt; 0) {
                        LOG.error(&quot;Flow Installation unsuccessful: Egress error is: &quot; + futureEgreeFlow.get().getErrors().toString());
                        return -1L;
                    }

                }


            } else if (!isFinalDomain &amp;&amp; !isFinalDomain) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1451</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1608</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            Bucket bucketFailover = new BucketBuilder()
                    .setBucketId(new BucketId(2L))
                    .setKey(new BucketKey(new BucketId(2L)))
                    .setWatchPort(failoverPort.longValue())
                    .setAction(failoverActionsList)
                    .setWatchGroup(DEFAULT_WATCH_GROUP)
                    .build();

            bucketList.add(bucketFailover);

        }
        Buckets buckets = new BucketsBuilder().setBucket(bucketList).build();


        return new AddGroupInputBuilder()
                .setGroupName(&quot;FF&quot;)
                .setBarrier(false)
                .setGroupId(new GroupId(groupId))
                .setGroupType(GroupTypes.GroupFf)
                .setBuckets(buckets)
                .setNode(getNodeRef(new NodeId(switchId)))</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1419</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2072</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                         Long meterId,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeId srcNode,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeId destNode,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeConnectorId srcNodePort,
                                         org.opendaylight.yang.gen.v1.urn.opendaylight.inventory.rev130819.NodeConnectorId destNodePort,
                                         Long bandwidth,
                                         Long burst,
                                         VlanId srcVlan,
                                         VlanId destVlan,
                                         Timestamp startTime,
                                         Timestamp endTime
    ) {

        try {

            // System.out.println(startTime.getValue());

            ++id;

            final Long finalId = id;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>250</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>282</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>430</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>461</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                                   first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, null, links, queues, srcVlan);

                                                   listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                   AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                   Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                   if (flowResult.get().isSuccessful()) {
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   } else {

                                                       LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                   }


                                               } else {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>335</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>869</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                                       flows = createFlows(matchingStructure, listOfLinks, queuesForLinkList, inPortSecond);
                                                   }


                                                   for (int j = 0; j &lt; flows.size(); j++) {


                                                       Flow createdFlow = flows.get(j);


                                                       // the first link should be ignored
                                                       String nodeId = listOfLinks.get(j)
                                                               .getSource().getSourceNode().getValue();

                                                       //get the add input flow to add to sal

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(nodeId, createdFlow.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput flow = getAddFlowInputToSend(nodeId, createdFlow);

                                                       LOG.info(&quot;Adding flows to salflow&quot;);

                                                       // add flow to sal
                                                       salFlowService.addFlow(flow);
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   }

                                               }


                                               IdToListMap.put(finalId, listofFlowRequests);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>514</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>694</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                    flows = createFlows(matchingStructure, listOfLinks, queuesForLinkList, inPortSecond);
                }


                for (int j = 0; j &lt; flows.size(); j++) {


                    Flow createdFlow = flows.get(j);


                    // the first link should be ignored
                    String nodeId = listOfLinks.get(j)
                            .getSource().getSourceNode().getValue();

                    //get the add input flow to add to sal

                    listofFlowRequests.add(new EmbeddingFlowRequest(nodeId, createdFlow.getCookie().getValue(), meterId, burst, bandwidth));

                    AddFlowInput flow = getAddFlowInputToSend(nodeId, createdFlow);

                    LOG.info(&quot;Adding flows to salflow&quot;);

                    // add flow to sal
                    salFlowService.addFlow(flow);
                    LOG.info(&quot;Flow successfully added&quot;);

                }

            }


            IdToListMap.put(id, listofFlowRequests);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>431</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>563</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        FlowBuilder flowBuilder = new FlowBuilder()
                .setTableId((short) 0)
                .setFlowName(&quot;random&quot;);

        //Flow ID
        flowBuilder.setId(new FlowId(Long.toString(flowBuilder.hashCode())));

        // TcpMatchBuilder tcpMatchBuilder = new TcpMatchBuilder().setTcpSourcePort(new PortNumber(sourcePort)).setTcpDestinationPort(new PortNumber(destPort));
        //IpMatchBuilder ipMatchBuilder = new IpMatchBuilder().setIpProtocol(protocol);

        Match match = new MatchBuilder()
                .setEthernetMatch(new EthernetMatchBuilder().setEthernetType(new EthernetTypeBuilder().setType(new EtherType(0x8847L)).build()).build())
                .setProtocolMatchFields(new ProtocolMatchFieldsBuilder().setMplsLabel(mplsLabel).build())
                .build();


        ActionBuilder actionBuilder = new ActionBuilder();
        List&lt;Action&gt; actions = new ArrayList&lt;Action&gt;();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1405</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/Interdomain.java</td>
<td>1550</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        Bucket bucket = new BucketBuilder()
                .setBucketId(new BucketId(1L))
                .setWatchPort(Long.parseLong(outputNodeConnector))
                .setKey(new BucketKey(new BucketId(1L)))
                .setAction(listofactions)
                .setWatchGroup(DEFAULT_WATCH_GROUP)
                .build();

        List&lt;Bucket&gt; bucketList = new ArrayList&lt;&gt;();

        bucketList.add(bucket);

        if ((!failoverMpls.equals(-1L)) &amp;&amp; failoverPort != null) {

            List&lt;Action&gt; failoverActionsList = new ArrayList&lt;&gt;();
            ActionBuilder failoverActions = new ActionBuilder();

            Action popMPLS = failoverActions.setOrder(0).setAction(new PopMplsActionCaseBuilder()</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>614</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>644</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>790</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>819</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                                   first = createBestEffortSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, null, links, srcVlan);

                                                   listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                   AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                   Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                   if (flowResult.get().isSuccessful()) {
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   } else {

                                                       LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                   }


                                               } else {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1939</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1982</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2146</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2188</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                AddFlowInput flowinputSrcNode = getAddFlowInputToSend(srcNode.getValue(), sourceFlowWithMeter);

                listofFlowRequests.add(new EmbeddingFlowRequest(srcNode.getValue(), sourceFlowWithMeter.getCookie().getValue(), meter, burst, bandwidth));

                Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; resultFuture = salFlowService.addFlow(flowinputSrcNode);

                if (resultFuture.get().isSuccessful()) {
                    LOG.info(&quot;Source Flow added successfully and cookie is: &quot; + sourceFlowWithMeter.getCookie());

                } else {

                    LOG.error(&quot;Source Flow was not installed and error is &quot; + resultFuture.get().getErrors().toString());

                }


            } else {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>250</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>430</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>644</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>819</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                                   first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, null, links, queues, srcVlan);

                                                   listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                   AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                   Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                   if (flowResult.get().isSuccessful()) {
                                                       LOG.info(&quot;Flow successfully added&quot;);

                                                   } else {

                                                       LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                   }


                                               } else {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>282</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>461</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>614</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>790</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                                                       first = createSourceFlowWithQueuesWithMeterForDisjoint(srcNodePort, matchingStructure, meterId, links, queues, srcVlan);

                                                       listofFlowRequests.add(new EmbeddingFlowRequest(srcNodeId.getValue(), first.getCookie().getValue(), meterId, burst, bandwidth));

                                                       AddFlowInput srcFlow = getAddFlowInputToSend(srcNodeId.getValue(), first);
                                                       Future&lt;RpcResult&lt;AddFlowOutput&gt;&gt; flowResult = salFlowService.addFlow(srcFlow);


                                                       if (flowResult.get().isSuccessful()) {
                                                           LOG.info(&quot;Flow successfully added&quot;);

                                                       } else {

                                                           LOG.error(&quot;Flow was not added and error is: &quot; + flowResult.get().getErrors().toString());
                                                       }

                                                   } else {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1664</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1784</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2933</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        flowBuilder.setId(new FlowId(Long.toString(flowBuilder.hashCode())));

        // TcpMatchBuilder tcpMatchBuilder = new TcpMatchBuilder().setTcpSourcePort(new PortNumber(sourcePort)).setTcpDestinationPort(new PortNumber(destPort));
        //IpMatchBuilder ipMatchBuilder = new IpMatchBuilder().setIpProtocol(protocol);

        MatchBuilder matchBuilder = new MatchBuilder();

        matchBuilder.setEthernetMatch(match1.getEthernetMatch())
                .setLayer3Match(match1.getLayer3Match());


        if (match1.getIpMatch() != null &amp;&amp; match1.getLayer4Match() != null) {

            //ip and layer 4 are not null
            matchBuilder.setIpMatch(match1.getIpMatch())
                    .setLayer4Match(match1.getLayer4Match());


        }
        if (match1.getVlanMatch() != null) {
            matchBuilder.setVlanMatch(match1.getVlanMatch());
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>931</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1114</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2771</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                .setInPort(srcNodeConnectorId);


        if (match1.getIpMatch() != null &amp;&amp; match1.getLayer4Match() != null) {

            //ip and layer 4 are not null
            matchBuilder.setIpMatch(match1.getIpMatch())
                    .setLayer4Match(match1.getLayer4Match());


        }
        if (match1.getVlanMatch() != null) {
            matchBuilder.setVlanMatch(match1.getVlanMatch());
        }


        Match match = matchBuilder
                .build();

        ActionBuilder actionBuilder = new ActionBuilder();

        //Actions
        //currently changing tos and sending to output connector


        List&lt;List&lt;Action&gt;&gt; listofactions = new ArrayList&lt;&gt;();

        listofactions.add(new ArrayList&lt;Action&gt;());


        String firstElemOfFirstList = links.get(0).get(0).getSource().getSourceTp().getValue().split(&quot;:&quot;)[2];</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>931</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1114</td></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2771</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2938</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                .setInPort(srcNodeConnectorId);


        if (match1.getIpMatch() != null &amp;&amp; match1.getLayer4Match() != null) {

            //ip and layer 4 are not null
            matchBuilder.setIpMatch(match1.getIpMatch())
                    .setLayer4Match(match1.getLayer4Match());


        }
        if (match1.getVlanMatch() != null) {
            matchBuilder.setVlanMatch(match1.getVlanMatch());
        }


        Match match = matchBuilder
                .build();

        ActionBuilder actionBuilder = new ActionBuilder();

        //Actions
        //currently changing tos and sending to output connector


        List&lt;List&lt;Action&gt;&gt; listofactions = new ArrayList&lt;&gt;();

        listofactions.add(new ArrayList&lt;Action&gt;());</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2471</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>2767</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        LOG.info(&quot;setting the in port for the source flow to: &quot; + temp.getValue());

        matchBuilder.setEthernetMatch(match1.getEthernetMatch())
                .setLayer3Match(match1.getLayer3Match())
                .setInPort(temp);


        if (match1.getIpMatch() != null &amp;&amp; match1.getLayer4Match() != null) {

            //ip and layer 4 are not null
            matchBuilder.setIpMatch(match1.getIpMatch())
                    .setLayer4Match(match1.getLayer4Match());


        }
        if (match1.getVlanMatch() != null) {
            matchBuilder.setVlanMatch(match1.getVlanMatch());
        }


        Match match = matchBuilder
                .build();

        ActionBuilder actionBuilder = new ActionBuilder();
        List&lt;Action&gt; actions = new ArrayList&lt;Action&gt;();</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1156</td></tr>
<tr class="b">
<td>eu/virtuwind/resourcemanager/impl/PathConfigurator.java</td>
<td>1181</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            Action outputNodeConnectorActionsrcFirstList = actionBuilder
                    .setOrder(1).setAction(new OutputActionCaseBuilder()
                            .setOutputAction(new OutputActionBuilder()
                                    .setOutputNodeConnector(new Uri(firstElemOfFirstList))
                                    .build())
                            .build())
                    .build();

            Action outputNodeConnectorActionsrcSecondList = actionBuilder
                    .setOrder(2).setAction(new OutputActionCaseBuilder()
                            .setOutputAction(new OutputActionBuilder()
                                    .setOutputNodeConnector(new Uri(firstElemOfSecondList))
                                    .build())
                            .build())
                    .build();


            listofactions.get(0).add(vlanAction);</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2018
                        <a href="https://www.opendaylight.org">OpenDaylight</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
